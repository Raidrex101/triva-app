let token;
let questionsNumber = 5;
let category = 10;
let type = 'multiple';
let difficulty = 'easy';

let categories;

const requestToken = fetch('https://opentdb.com/api_token.php?command=request')
                        .then(response => response.json())
                        .then(json => {
                            console.log(json);
                            token = json.token;
                            console.log(`El token generado fue: ${token}`);
                            return fetch(`https://opentdb.com/api.php?amount=${questionsNumber}&category=${category}&difficulty=${difficulty}&type=${type}&token=${token}`);
                        })
                        .then(response => response.json())
                        .then(json => console.log(json))
                        .catch(error => console.log(error));

const retrieveCategories = async () => {
    const response = await fetch('https://opentdb.com/api_category.php');
    const responseJson = await response.json();
    categories = responseJson.trivia_categories;
    return responseJson;
}

const showCategories = async () => {
    console.log(await retrieveCategories());
}

const requestInfo = () => {
    fetch('https://opentdb.com/api_token.php?command=request')
                        .then(response => response.json())
                        .then(json => {
                            console.log(json);
                            token = json.token;
                            console.log(`El token generado fue: ${token}`);
                            return fetch(`https://opentdb.com/api.php?amount=${questionsNumber}&category=${category}&difficulty=${difficulty}&type=${type}&token=${token}`);
                        })
                        .then(response => response.json())
                        .then(json => console.log(json))
                        .catch(error => console.log(error));
}

showCategories();





document.addEventListener("DOMContentLoaded", () => {
    const questions = JSON.parse(sessionStorage.getItem("questions"))
    sessionStorage.removeItem("questions")
    gameStarted(index, questions)
    
    })
    
    let index = 0
    let score = 0
   
    function gameStarted (index, questions) {
        console.log(questions);
        
        
        const question = document.getElementById("question")
        question.innerHTML = `
        <h1>QUESTION #${index + 1}</H1>
        <h2>${questions[index].question}</h2>` 
        
        const respuestas = document.querySelectorAll("#respuestas button")
        console.log(respuestas);
        }